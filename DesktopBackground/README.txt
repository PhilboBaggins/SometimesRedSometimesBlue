Possibly useful: http://mainisusuallyafunction.blogspot.com.au/2012/04/minimal-encoder-for-uncompressed-pngs.html
